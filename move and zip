import os
import datetime
import shutil
from shutil import copyfile

old_dir_path = input("pls enter old directory path: for EXP:/home/mohammad/Desktop/old/ :")
archive_dir_path = input("pls enter new directory path: for EXP:/home/mohammad/Desktop/archive/ :")


def mod_date(filename):
    p=filename[4:13];
    return p;

def zip_func(direname):
  shutil.make_archive(archive_dir_path+direname +'_zip',   'zip'   , archive_dir_path+direname)
  shutil.rmtree(archive_dir_path+direname)

##########################################################3


ls = os.listdir(old_dir_path)
for filename in ls:
    dir_seprator = mod_date(filename)
    if os.path.isdir(archive_dir_path + dir_seprator) == False:
        os.mkdir(archive_dir_path + dir_seprator)
    shutil.move(old_dir_path + filename   ,   archive_dir_path +'/'+ dir_seprator +'/'+filename)


ls = os.listdir(archive_dir_path)
for direname in ls:
    zip_func(direname)
